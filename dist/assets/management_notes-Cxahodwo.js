import{a as c}from"./index-B9ygI19o.js";import{_ as v,c as g,a as e,w as a,h as f,i as y,j as w,v as d,t as p,F as k,r as _,k as x,o as b,f as m}from"./index-DLLBHxZI.js";const S={data(){return{title:"",label:"",technology:"",noteslist:[],isshow:!1,edittitle:"",editlabel:"",edittechnology:"",selectedId:null}},methods:{async submit(){const s=function(){const o=new Date,i=o.getFullYear(),n=String(o.getMonth()+1).padStart(2,"0"),r=String(o.getDate()).padStart(2,"0"),u=String(o.getHours()).padStart(2,"0"),l=String(o.getMinutes()).padStart(2,"0"),h=String(o.getSeconds()).padStart(2,"0");return`${i}-${n}-${r} ${u}:${l}:${h}`},t={id:Date.now(),title:this.title,label:this.label,time:s(),look:"5",technology:this.technology};if(!t.id||!t.title||!t.label||!t.technology){alert("请填写笔记信息！");return}try{const o=await c.post("http://47.79.40.65:3006/notes",t);if(o.status===201)alert("添加笔记成功！"),location.reload();else try{const i=o.data;alert(`添加失败: ${i.error||"未知错误"}. 详细信息: ${i.details||"无"}`)}catch{alert(`添加失败，但无法解析错误信息。状态码：${o.status}`)}}catch{}},reset(){this.title="",this.label="",this.technology=""},async del(s){if(!s)return;if(confirm("确定要删除该笔记吗？"))try{const o=`http://47.79.40.65:3006/notes/${s}`,i=await c.delete(o);i.status===200?(alert("删除成功！"),location.reload()):alert(`删除失败: ${i.data.error||"未知错误"}`)}catch(o){alert("删除数据失败，请检查网络。"),console.error(o)}},edit(s){this.isshow=!0,this.selectedId=s.id,this.edittitle=s.title,this.editlabel=s.label,this.edittechnology=s.technology},async editsubmit(){if(!this.selectedId){alert("请先选择要修改的学生");return}try{const s=`http://47.79.40.65:3006/notes/${this.selectedId}`,t=await c.put(s,{title:this.edittitle,label:this.editlabel,technology:this.edittechnology});t.status===200?(alert("修改成功！"),this.isshow=!1,location.reload()):alert(`修改失败: ${t.data.error||"未知错误"}`)}catch{}}},async created(){try{const s=await c.get("http://47.79.40.65:3006");console.log("后端数据：",s.data),s.data&&s.data.notes?this.noteslist=s.data.notes.sort((t,o)=>{const i=new Date(t.time);return new Date(o.time)-i}):console.warn("后端返回的数据格式不正确，缺少 'notes' 字段")}catch(s){console.error("请求失败:",s)}}},C={class:"box"},D={class:"center"},V={class:"form"},U={class:"nav"},B={class:"title"},I={class:"label"},M={class:"technology"},Y={class:"btn"},N={class:"food"},F={class:"noteslist"},H={class:"notestable"},T=["onClick"],$=["onClick"],E={class:"edit"},j={class:"edit-form"},A={class:"title"},L={class:"label"},q={class:"technology"},z={class:"btn"};function G(s,t,o,i,n,r){const u=w("router-link");return b(),g("div",C,[e("div",D,[e("div",V,[e("div",U,[f(u,{to:"/management_works"},{default:y(()=>[...t[10]||(t[10]=[m("作品",-1)])]),_:1}),f(u,{to:"/management_notes",style:{color:"#fff","background-color":"#60cdf8"}},{default:y(()=>[...t[11]||(t[11]=[m("笔记",-1)])]),_:1}),f(u,{to:"/management_travel"},{default:y(()=>[...t[12]||(t[12]=[m("旅游",-1)])]),_:1})]),e("div",B,[t[13]||(t[13]=e("span",null,"标题：",-1)),a(e("input",{type:"text",placeholder:"请输入标题(不超过45字)","onUpdate:modelValue":t[0]||(t[0]=l=>n.title=l)},null,512),[[d,n.title]])]),e("div",I,[t[14]||(t[14]=e("span",null,"链接：",-1)),a(e("input",{type:"text",placeholder:"请输入链接(不超过300字)","onUpdate:modelValue":t[1]||(t[1]=l=>n.label=l)},null,512),[[d,n.label]])]),e("div",M,[t[15]||(t[15]=e("span",null,"技术栈：",-1)),a(e("textarea",{placeholder:"请输入技术栈(不超过300字)","onUpdate:modelValue":t[2]||(t[2]=l=>n.technology=l)},null,512),[[d,n.technology]])]),e("div",Y,[e("button",{onClick:t[3]||(t[3]=l=>r.submit())},"提交"),e("button",{onClick:t[4]||(t[4]=l=>r.reset())},"重置")])]),e("div",N,[e("p",null,"笔记列表（"+p(n.noteslist.length)+"）",1),e("div",F,[t[16]||(t[16]=e("ul",null,[e("li",null,"标题"),e("li",null,"链接"),e("li",null,"技术栈"),e("li",null,"操作")],-1)),e("div",H,[(b(!0),g(k,null,_(n.noteslist,l=>(b(),g("ul",{key:l.id},[e("li",null,p(l.title),1),e("li",null,p(l.label),1),e("li",null,p(l.technology),1),e("li",null,[e("button",{onClick:h=>r.edit(l)},"编辑",8,T),e("button",{onClick:h=>r.del(l.id)},"删除",8,$)])]))),128))])])]),a(e("div",E,[e("div",j,[t[20]||(t[20]=e("h3",null,"编辑笔记",-1)),e("div",A,[t[17]||(t[17]=e("span",null,"标题：",-1)),a(e("input",{type:"text",placeholder:"请输入标题(不超过45字)","onUpdate:modelValue":t[5]||(t[5]=l=>n.edittitle=l)},null,512),[[d,n.edittitle]])]),e("div",L,[t[18]||(t[18]=e("span",null,"链接：",-1)),a(e("input",{type:"text",placeholder:"请输入链接(不超过45字)","onUpdate:modelValue":t[6]||(t[6]=l=>n.editlabel=l)},null,512),[[d,n.editlabel]])]),e("div",q,[t[19]||(t[19]=e("span",null,"技术栈：",-1)),a(e("textarea",{placeholder:"请输入技术栈(不超过45字)","onUpdate:modelValue":t[7]||(t[7]=l=>n.edittechnology=l)},null,512),[[d,n.edittechnology]])]),e("div",z,[e("button",{onClick:t[8]||(t[8]=l=>r.editsubmit())},"提交"),e("button",{onClick:t[9]||(t[9]=l=>this.isshow=!1)},"取消")])])],512),[[x,n.isshow]])])])}const O=v(S,[["render",G],["__scopeId","data-v-9a24d9d4"]]);export{O as default};
